READING_CSV iris_sampled ['data/sampled/iris_sampled.csv']
    sepal length (cm)  sepal width (cm)  ...  petal width (cm)  target
0                 6.4               3.2  ...               2.3       2
1                 6.3               3.3  ...               1.6       1
2                 7.1               3.0  ...               2.1       2
3                 6.1               2.6  ...               1.4       2
4                 6.8               3.2  ...               2.3       2
5                 5.8               2.7  ...               1.0       1
6                 6.1               2.8  ...               1.3       1
7                 6.0               3.4  ...               1.6       1
8                 5.4               3.7  ...               0.2       0
9                 4.8               3.4  ...               0.2       0
10                5.4               3.4  ...               0.4       0
11                5.9               3.0  ...               1.5       1
12                5.1               2.5  ...               1.1       1
13                5.8               2.6  ...               1.2       1
14                6.7               3.3  ...               2.1       2
15                5.0               3.3  ...               0.2       0
16                6.2               2.9  ...               1.3       1
17                4.7               3.2  ...               0.2       0

[18 rows x 5 columns]
MLLITE_MODEL_SET_OPTIONS NuSVC None
MLLITE_MODEL_OPTIONS_DEFAULT NuSVC { "max_iter" : 128 }
MLLITE_MODEL_OPTIONS_AFTER_SETTING NuSVC { ,  "max_iter" : 128  }
MLLITE_MODEL_JSON_AFTER_SETTING NuSVC None
('OPERATION_START', 'TRAINING')
[[6.4 3.2 5.3 2.3]
 [6.3 3.3 4.7 1.6]
 [7.1 3.  5.9 2.1]
 [6.1 2.6 5.6 1.4]
 [6.8 3.2 5.9 2.3]] [2 1 2 2 2]
MLLITE_FIT_USING_MODEL mllite_nu_svm_class.NuSVC_ff4_il8
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_NU_CLASSIFIER_FIT' 1 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_NU_CLASSIFIER_FIT' 2 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_NU_CLASSIFIER_FIT' 3 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_NU_CLASSIFIER_FIT' 4 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_SUB_PROBLEM' 1 3
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 1 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 2 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 3 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 4 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 5 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_SUB_PROBLEM' 2 3
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 1 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 2 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 3 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 4 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 5 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_SUB_PROBLEM' 3 3
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 1 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 2 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 3 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 4 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_TRAIN_CLASS_PROBA_CROSS_VALIDATION' 5 5
PROGRESS_REPORT_ELAPSED_TOTAL 'SVM_NU_CLASSIFIER_FIT' 5 5
('OPERATION_END_ELAPSED', 0.013, 'TRAINING')
{ ,  "max_iter" : 128  }
{ ,  "max_iter" : 128  }
{
	"metadata" : { "model" : "Vapnik_NuSVC_RBF", "version" : "2024-W14", "signature" : "ff4_il8"},
	"options" : {"svm_type" : "nu_svc", "kernel" : "rbf", "degree" : 3, "gamma" : 0.067644, "coef0" : 0.000000, "cache_size" : 300, "tol" : 0.001000, "nu" : 0.500000, "epsilon" : 0.000000, "shrinking" : 0, "probability" : 1, "C" : 1.000000, "max_iter" : 128, "random_state" : 1789 },
	"dataset" : { "dataset_rows" : 18, "dataset_features" : 4 },
	"classes" : [ 0, 1, 2 ],
	"svm_model" : {
	"classes" : 3,
	"L" : 16,
	"SupportVectors" : {
		"SV_00" : [ 5.400000, 3.700000, 1.500000, 0.200000 ],
		"SV_01" : [ 4.800000, 3.400000, 1.600000, 0.200000 ],
		"SV_02" : [ 5.400000, 3.400000, 1.500000, 0.400000 ],
		"SV_03" : [ 5.000000, 3.300000, 1.400000, 0.200000 ],
		"SV_04" : [ 6.300000, 3.300000, 4.700000, 1.600000 ],
		"SV_05" : [ 5.800000, 2.700000, 4.100000, 1.000000 ],
		"SV_06" : [ 6.100000, 2.800000, 4.000000, 1.300000 ],
		"SV_07" : [ 6.000000, 3.400000, 4.500000, 1.600000 ],
		"SV_08" : [ 5.900000, 3.000000, 4.200000, 1.500000 ],
		"SV_09" : [ 5.100000, 2.500000, 3.000000, 1.100000 ],
		"SV_10" : [ 5.800000, 2.600000, 4.000000, 1.200000 ],
		"SV_11" : [ 6.200000, 2.900000, 4.300000, 1.300000 ],
		"SV_12" : [ 6.400000, 3.200000, 5.300000, 2.300000 ],
		"SV_13" : [ 6.100000, 2.600000, 5.600000, 1.400000 ],
		"SV_14" : [ 6.800000, 3.200000, 5.900000, 2.300000 ],
		"SV_15" : [ 6.700000, 3.300000, 5.700000, 2.100000 ]
	},
	"SupportVectorsCoefs" : {
		"SV_coef_0" : [ 0.795253, 0.795253, 0.795253, 0.198813, -0.000000, -0.795253, -0.676171, -0.000000, -0.000000, -0.795253, -0.317895, -0.000000, -0.538865, -0.538865, -0.000000, -0.269432 ],
		"SV_coef_1" : [ 0.359240, 0.449057, 0.538865, 0.000000, 2.099156, 0.000000, 0.000000, 2.099156, 0.524789, 0.000000, 0.000000, 2.099156, -2.099156, -2.099156, -0.524789, -2.099156 ]
	},
	"rho" : [ -0.021663, -0.005904, -0.001808 ],
	"nSV" : [ 4, 8, 4 ],
	"probA" : [ -2.022902, -1.824059, -2.090365 ],
	"probB" : [ 0.287882, 0.026425, 0.043315 ],
	"n_iter" : [ 3, 4, 5 ]
}
}
WRITING_JSON_CODE 'logs/auto_tests/classification/NuSVC/mllite.NuSVC_iris_sampled.json'

RELOADING_MODEL_FROM_JSON_START ('iris_sampled', 'NuSVC')
MLLITE_MODEL_SET_OPTIONS NuSVC None
MLLITE_MODEL_OPTIONS_DEFAULT NuSVC { "max_iter" : 128 }
MLLITE_MODEL_OPTIONS_AFTER_SETTING NuSVC { ,  "max_iter" : 128  }
MLLITE_MODEL_JSON_AFTER_SETTING NuSVC None
MLLITE_RELOADING_MODEL mllite_nu_svm_class.NuSVC_ff4_il8
{
	"metadata" : { "model" : "Vapnik_NuSVC_RBF", "version" : "2024-W14", "signature" : "ff4_il8"},
	"options" : {"svm_type" : "nu_svc", "kernel" : "rbf", "degree" : 3, "gamma" : 0.067644, "coef0" : 0.000000, "cache_size" : 300, "tol" : 0.001000, "nu" : 0.500000, "epsilon" : 0.000000, "shrinking" : 0, "probability" : 1, "C" : 1.000000, "max_iter" : 128, "random_state" : 1789 },
	"dataset" : { "dataset_rows" : 18, "dataset_features" : 4 },
	"classes" : [ 0, 1, 2 ],
	"svm_model" : {
	"classes" : 3,
	"L" : 16,
	"SupportVectors" : {
		"SV_00" : [ 5.400000, 3.700000, 1.500000, 0.200000 ],
		"SV_01" : [ 4.800000, 3.400000, 1.600000, 0.200000 ],
		"SV_02" : [ 5.400000, 3.400000, 1.500000, 0.400000 ],
		"SV_03" : [ 5.000000, 3.300000, 1.400000, 0.200000 ],
		"SV_04" : [ 6.300000, 3.300000, 4.700000, 1.600000 ],
		"SV_05" : [ 5.800000, 2.700000, 4.100000, 1.000000 ],
		"SV_06" : [ 6.100000, 2.800000, 4.000000, 1.300000 ],
		"SV_07" : [ 6.000000, 3.400000, 4.500000, 1.600000 ],
		"SV_08" : [ 5.900000, 3.000000, 4.200000, 1.500000 ],
		"SV_09" : [ 5.100000, 2.500000, 3.000000, 1.100000 ],
		"SV_10" : [ 5.800000, 2.600000, 4.000000, 1.200000 ],
		"SV_11" : [ 6.200000, 2.900000, 4.300000, 1.300000 ],
		"SV_12" : [ 6.400000, 3.200000, 5.300000, 2.300000 ],
		"SV_13" : [ 6.100000, 2.600000, 5.600000, 1.400000 ],
		"SV_14" : [ 6.800000, 3.200000, 5.900000, 2.300000 ],
		"SV_15" : [ 6.700000, 3.300000, 5.700000, 2.100000 ]
	},
	"SupportVectorsCoefs" : {
		"SV_coef_0" : [ 0.795253, 0.795253, 0.795253, 0.198813, -0.000000, -0.795253, -0.676171, -0.000000, -0.000000, -0.795253, -0.317895, -0.000000, -0.538865, -0.538865, -0.000000, -0.269432 ],
		"SV_coef_1" : [ 0.359240, 0.449057, 0.538865, 0.000000, 2.099156, 0.000000, 0.000000, 2.099156, 0.524789, 0.000000, 0.000000, 2.099156, -2.099156, -2.099156, -0.524789, -2.099156 ]
	},
	"rho" : [ -0.021663, -0.005904, -0.001808 ],
	"nSV" : [ 4, 8, 4 ],
	"probA" : [ -2.022902, -1.824059, -2.090365 ],
	"probB" : [ 0.287882, 0.026425, 0.043315 ],
	"n_iter" : [ 3, 4, 5 ]
}
}
BEAUTIFIED_JSON_START
{
	"classes" : [ 0, 1, 2 ],
	"dataset" : 	{
		"dataset_features" : 4,
		"dataset_rows" : 18
	},
	"metadata" :  { "model" : "Vapnik_NuSVC_RBF", "signature" : "ff4_il8", "version" : "2024-W14" },
	"options" :  { "C" : 1.0, "cache_size" : 300, "coef0" : 0.0, "degree" : 3, "epsilon" : 0.0, "gamma" : 0.067644, "kernel" : "rbf", "max_iter" : 128, "nu" : 0.5, "probability" : 1, "random_state" : 1789, "shrinking" : 0, "svm_type" : "nu_svc", "tol" : 0.001 },
	"svm_model" : 	{
		"L" : 16,
		"SupportVectors" : 	{
			"SV_00" : [ 5.4, 3.7, 1.5, 0.2 ],
			"SV_01" : [ 4.8, 3.4, 1.6, 0.2 ],
			"SV_02" : [ 5.4, 3.4, 1.5, 0.4 ],
			"SV_03" : [ 5.0, 3.3, 1.4, 0.2 ],
			"SV_04" : [ 6.3, 3.3, 4.7, 1.6 ],
			"SV_05" : [ 5.8, 2.7, 4.1, 1.0 ],
			"SV_06" : [ 6.1, 2.8, 4.0, 1.3 ],
			"SV_07" : [ 6.0, 3.4, 4.5, 1.6 ],
			"SV_08" : [ 5.9, 3.0, 4.2, 1.5 ],
			"SV_09" : [ 5.1, 2.5, 3.0, 1.1 ],
			"SV_10" : [ 5.8, 2.6, 4.0, 1.2 ],
			"SV_11" : [ 6.2, 2.9, 4.3, 1.3 ],
			"SV_12" : [ 6.4, 3.2, 5.3, 2.3 ],
			"SV_13" : [ 6.1, 2.6, 5.6, 1.4 ],
			"SV_14" : [ 6.8, 3.2, 5.9, 2.3 ],
			"SV_15" : [ 6.7, 3.3, 5.7, 2.1 ]
		},
		"SupportVectorsCoefs" : 	{
			"SV_coef_0" : [ 0.795253, 0.795253, 0.795253, 0.198813, -0.0, -0.795253, -0.676171, -0.0, -0.0, -0.795253, -0.317895, -0.0, -0.538865, -0.538865, -0.0, -0.269432 ],
			"SV_coef_1" : [ 0.35924, 0.449057, 0.538865, 0.0, 2.099156, 0.0, 0.0, 2.099156, 0.524789, 0.0, 0.0, 2.099156, -2.099156, -2.099156, -0.524789, -2.099156 ]
		},
		"classes" : 3,
		"nSV" : [ 4, 8, 4 ],
		"n_iter" : [ 3, 4, 5 ],
		"probA" : [ -2.022902, -1.824059, -2.090365 ],
		"probB" : [ 0.287882, 0.026425, 0.043315 ],
		"rho" : [ -0.021663, -0.005904, -0.001808 ]
	}
}
BEAUTIFIED_JSON_END
RELOADING_MODEL_FROM_JSON_END ('iris_sampled', 'NuSVC')
('OPERATION_START', 'PREDICT')
('OPERATION_END_ELAPSED', 0.0, 'PREDICT')
('OPERATION_START', 'PREDICT')
('OPERATION_END_ELAPSED', 0.0, 'PREDICT')
[[0.0654 0.2802 0.6545]
 [0.0442 0.9469 0.0089]
 [0.0677 0.1094 0.823 ]
 [0.0634 0.3151 0.6216]
 [0.0666 0.1094 0.824 ]
 [0.1901 0.0707 0.7392]
 [0.1805 0.0643 0.7552]
 [0.1358 0.0386 0.8256]
 [0.     0.     1.    ]
 [0.     0.     1.    ]
 [0.     0.     1.    ]
 [0.1608 0.0524 0.7868]
 [0.4937 0.2908 0.2154]
 [0.1904 0.071  0.7386]
 [0.0661 0.1675 0.7664]
 [0.     0.     1.    ]
 [0.1506 0.0466 0.8029]
 [0.     0.     1.    ]]
(18, 3)
(18, 3) float32
MODEL_PERFS {'class_name': 'mllite.NuSVC', 'model_name': 'NuSVC', 'options': None, 'dataset': 'iris_sampled', 'size': 18, 'accuracy': 1.0, 'auc': 0.32211538461538464}
WRITING_PERF_CODE 'logs/auto_tests/classification/NuSVC/mllite.NuSVC_iris_sampled.perf'

MODEL_PERFS_TIMINGS {'class_name': 'mllite.NuSVC', 'model_name': 'NuSVC', 'options': None, 'dataset': 'iris_sampled', 'training_time_in_sec': 0.013, 'prediction_time_in_sec': 0.0}

MODEL_EXPLANATION_START
PROGRESS_REPORT_ELAPSED_TOTAL 'MONTE_CARLO_CLASSIFICATION_EXPLAINER' 0 4
PROGRESS_REPORT_ELAPSED_TOTAL 'MONTE_CARLO_CLASSIFICATION_EXPLAINER' 1 4
PROGRESS_REPORT_ELAPSED_TOTAL 'MONTE_CARLO_CLASSIFICATION_EXPLAINER' 2 4
PROGRESS_REPORT_ELAPSED_TOTAL 'MONTE_CARLO_CLASSIFICATION_EXPLAINER' 3 4
{
   "Contributions" : {
      "X_0" : [ -0.006349, -0.010639, 0.016988 ],
      "X_1" : [ -0.000317, -0.011650, 0.011967 ],
      "X_2" : [ 0.004972, -0.031229, 0.026257 ],
      "X_3" : [ -0.008546, -0.009831, 0.018377 ]   
   },
   "Most_Contributive_Features_By_Class" : {
      "class_0" : [ 3, 0, 2, 1 ],
      "class_1" : [ 2, 1, 0, 3 ],
      "class_2" : [ 2, 3, 0, 1 ]
   }
}
WRITING_EXPLAIN_CODE 'logs/auto_tests/classification/NuSVC/mllite.NuSVC_iris_sampled_explain.json'

MODEL_EXPLANATION_END
WRITING_SQL_CODE 'logs/auto_tests/classification/NuSVC/mllite.NuSVC_iris_sampled_duckdb.sql'



SQL_OUT_PUT_FIRST_LINES_START ('iris_sampled', 'NuSVC', 'duckdb')
WITH model_input AS 
 (SELECT "ADS"."index" AS "index",
    CAST("ADS"."X_0" AS FLOAT) AS "X_0", CAST("ADS"."X_1" AS FLOAT) AS "X_1", CAST("ADS"."X_2" AS FLOAT) AS "X_2", CAST("ADS"."X_3" AS FLOAT) AS "X_3"
  FROM "iris_sampled" AS "ADS" 
 ),
"SV_data" AS
 ( SELECT 
   "Values"."sv_idx" AS "sv_idx",
   CAST("Values"."sv_0" AS FLOAT) AS "sv_0",
   CAST("Values"."sv_1" AS FLOAT) AS "sv_1",
   CAST("Values"."sv_2" AS FLOAT) AS "sv_2",
   CAST("Values"."sv_3" AS FLOAT) AS "sv_3"
  FROM
  (
     SELECT 0 AS "sv_idx", 5.400000 AS "sv_0", 3.700000 AS "sv_1", 1.500000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 1 AS "sv_idx", 4.800000 AS "sv_0", 3.400000 AS "sv_1", 1.600000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 2 AS "sv_idx", 5.400000 AS "sv_0", 3.400000 AS "sv_1", 1.500000 AS "sv_2", 0.400000 AS "sv_3"
     UNION ALL
     SELECT 3 AS "sv_idx", 5.000000 AS "sv_0", 3.300000 AS "sv_1", 1.400000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 4 AS "sv_idx", 6.300000 AS "sv_0", 3.
SQL_OUT_PUT_FIRST_LINES_END ('iris_sampled', 'NuSVC', 'duckdb')
SQL_OUT_PUT_LAST_LINES_START ('iris_sampled', 'NuSVC', 'duckdb')
roba",
     t."Max_Score" AS "Max_Score",
     COALESCE(  t."max_idx_0", t."max_idx_1", t."max_idx_2" ) AS argmax_class_idx
   FROM
     "arg_max_cte_with_max_proba_idx" AS t
)
SELECT arg_max_cte."index" AS "index",
  arg_max_cte."Score_0" AS "Score_0",
  arg_max_cte."Proba_0" AS "Proba_0",
  CASE WHEN (arg_max_cte."Proba_0" IS NULL OR arg_max_cte."Proba_0" > 0.0) THEN LN( arg_max_cte."Proba_0" ) ELSE -1.79769313486231e+308 END AS "LogProba_0",
  arg_max_cte."Score_1" AS "Score_1",
  arg_max_cte."Proba_1" AS "Proba_1",
  CASE WHEN (arg_max_cte."Proba_1" IS NULL OR arg_max_cte."Proba_1" > 0.0) THEN LN( arg_max_cte."Proba_1" ) ELSE -1.79769313486231e+308 END AS "LogProba_1",
  arg_max_cte."Score_2" AS "Score_2",
  arg_max_cte."Proba_2" AS "Proba_2",
  CASE WHEN (arg_max_cte."Proba_2" IS NULL OR arg_max_cte."Proba_2" > 0.0) THEN LN( arg_max_cte."Proba_2" ) ELSE -1.79769313486231e+308 END AS "LogProba_2",
  arg_max_cte."argmax_class_idx" AS "Decision",
  arg_max_cte."Max_Proba" AS "DecisionProba"
FROM arg_max_cte
SQL_OUT_PUT_LAST_LINES_END ('iris_sampled', 'NuSVC', 'duckdb') 




COPY_TRAINING_DATA_TO_SQLITE_START
<class 'pandas.core.frame.DataFrame'>
Index: 18 entries, 0 to 17
Data columns (total 4 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   X_0     18 non-null     float32
 1   X_1     18 non-null     float32
 2   X_2     18 non-null     float32
 3   X_3     18 non-null     float32
dtypes: float32(4)
memory usage: 432.0 bytes
       X_0  X_1  X_2  X_3
index                    
0      6.4  3.2  5.3  2.3
1      6.3  3.3  4.7  1.6
2      7.1  3.0  5.9  2.1
3      6.1  2.6  5.6  1.4
4      6.8  3.2  5.9  2.3
5      5.8  2.7  4.1  1.0
6      6.1  2.8  4.0  1.3
7      6.0  3.4  4.5  1.6
8      5.4  3.7  1.5  0.2
9      4.8  3.4  1.6  0.2
10     5.4  3.4  1.5  0.4
11     5.9  3.0  4.2  1.5
12     5.1  2.5  3.0  1.1
13     5.8  2.6  4.0  1.2
14     6.7  3.3  5.7  2.1
15     5.0  3.3  1.4  0.2
16     6.2  2.9  4.3  1.3
17     4.7  3.2  1.3  0.2
COPY_TRAINING_DATA_TO_SQLITE_END


PREDICT_MODEL_ON_TRAINING_DATA_INSIDE_SQLITE_START
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 18 entries, 0 to 17
Data columns (total 12 columns):
 #   Column         Non-Null Count  Dtype 
---  ------         --------------  ----- 
 0   index          18 non-null     int64 
 1   Score_0        18 non-null     int64 
 2   Proba_0        0 non-null      object
 3   LogProba_0     0 non-null      object
 4   Score_1        18 non-null     int64 
 5   Proba_1        0 non-null      object
 6   LogProba_1     0 non-null      object
 7   Score_2        18 non-null     int64 
 8   Proba_2        0 non-null      object
 9   LogProba_2     0 non-null      object
 10  Decision       0 non-null      object
 11  DecisionProba  0 non-null      object
dtypes: int64(4), object(8)
memory usage: 1.8+ KB
    index  Score_0 Proba_0 LogProba_0  ...  Proba_2 LogProba_2 Decision  DecisionProba
0       0        2    None       None  ...     None       None     None           None
1       1        2    None       None  ...     None       None     None           None
2       2        2    None       None  ...     None       None     None           None
3       3        2    None       None  ...     None       None     None           None
4       4        2    None       None  ...     None       None     None           None
5       5        2    None       None  ...     None       None     None           None
6       6        2    None       None  ...     None       None     None           None
7       7        2    None       None  ...     None       None     None           None
8       8        2    None       None  ...     None       None     None           None
9       9        2    None       None  ...     None       None     None           None
10     10        2    None       None  ...     None       None     None           None
11     11        2    None       None  ...     None       None     None           None
12     12        2    None       None  ...     None       None     None           None
13     13        2    None       None  ...     None       None     None           None
14     14        2    None       None  ...     None       None     None           None
15     15        2    None       None  ...     None       None     None           None
16     16        2    None       None  ...     None       None     None           None
17     17        2    None       None  ...     None       None     None           None

[18 rows x 12 columns]
PREDICT_MODEL_ON_TRAINING_DATA_INSIDE_SQLITE_END


COMPARE_SQL_OUTPUT_AND_PYTHON_OUTPUT_START
Index(['index', 'Score_0', 'Proba_0', 'LogProba_0', 'Score_1', 'Proba_1',
       'LogProba_1', 'Score_2', 'Proba_2', 'LogProba_2', 'Decision',
       'DecisionProba'],
      dtype='object')
    index  Score_0 SQL_Proba_0  ...    Py_Proba_1  Py_Proba_2 Py_Decision
2       2        2        None  ...  1.093682e-01    0.822978           2
3       3        2        None  ...  3.150512e-01    0.621573           2
4       4        2        None  ...  1.093985e-01    0.824011           2
5       5        2        None  ...  7.066552e-02    0.739194           1
6       6        2        None  ...  6.432876e-02    0.755166           1
7       7        2        None  ...  3.864093e-02    0.825593           1
8       8        2        None  ...  2.930234e-14    1.000000           0
9       9        2        None  ...  2.930234e-14    1.000000           0
10     10        2        None  ...  2.930234e-14    1.000000           0
11     11        2        None  ...  5.236438e-02    0.786840           1
12     12        2        None  ...  2.908435e-01    0.215439           1
13     13        2        None  ...  7.098612e-02    0.738621           1
14     14        2        None  ...  1.675058e-01    0.766420           2
15     15        2        None  ...  2.930234e-14    1.000000           0
16     16        2        None  ...  4.656909e-02    0.802858           1
17     17        2        None  ...  2.930234e-14    1.000000           0

[16 rows x 16 columns]
MLLITE_CLASS_SQL_ERROR ('iris_sampled', 'NuSVC', 'duckdb') ('Py_Proba_0', 'SQL_Proba_0') nan
      Py_Proba_0 SQL_Proba_0 SQL_Error_0
2   6.765372e-02        None         NaN
3   6.337593e-02        None         NaN
4   6.659008e-02        None         NaN
5   1.901400e-01        None         NaN
6   1.805055e-01        None         NaN
7   1.357665e-01        None         NaN
8   2.441862e-14        None         NaN
9   2.441862e-14        None         NaN
10  2.441862e-14        None         NaN
11  1.607952e-01        None         NaN
12  4.937173e-01        None         NaN
13  1.903923e-01        None         NaN
14  6.607427e-02        None         NaN
15  2.441862e-14        None         NaN
16  1.505729e-01        None         NaN
17  2.441862e-14        None         NaN
MLLITE_CLASS_SQL_ERROR ('iris_sampled', 'NuSVC', 'duckdb') ('Py_Proba_1', 'SQL_Proba_1') nan
      Py_Proba_1 SQL_Proba_1 SQL_Error_1
2   1.093682e-01        None         NaN
3   3.150512e-01        None         NaN
4   1.093985e-01        None         NaN
5   7.066552e-02        None         NaN
6   6.432876e-02        None         NaN
7   3.864093e-02        None         NaN
8   2.930234e-14        None         NaN
9   2.930234e-14        None         NaN
10  2.930234e-14        None         NaN
11  5.236438e-02        None         NaN
12  2.908435e-01        None         NaN
13  7.098612e-02        None         NaN
14  1.675058e-01        None         NaN
15  2.930234e-14        None         NaN
16  4.656909e-02        None         NaN
17  2.930234e-14        None         NaN
MLLITE_CLASS_SQL_ERROR ('iris_sampled', 'NuSVC', 'duckdb') ('Py_Proba_2', 'SQL_Proba_2') nan
    Py_Proba_2 SQL_Proba_2 SQL_Error_2
2     0.822978        None         NaN
3     0.621573        None         NaN
4     0.824011        None         NaN
5     0.739194        None         NaN
6     0.755166        None         NaN
7     0.825593        None         NaN
8     1.000000        None         NaN
9     1.000000        None         NaN
10    1.000000        None         NaN
11    0.786840        None         NaN
12    0.215439        None         NaN
13    0.738621        None         NaN
14    0.766420        None         NaN
15    1.000000        None         NaN
16    0.802858        None         NaN
17    1.000000        None         NaN
MLLITE_CLASS_SQL_EXECUTION_STATUS ('iris_sampled', 'NuSVC', 'duckdb', 'Success')
    Py_Decision SQL_Decision
2             2         None
3             2         None
4             2         None
5             1         None
6             1         None
7             1         None
8             0         None
9             0         None
10            0         None
11            1         None
12            1         None
13            1         None
14            2         None
15            0         None
16            1         None
17            0         None
COMPARE_SQL_OUTPUT_AND_PYTHON_OUTPUT_END
WRITING_SQL_CODE 'logs/auto_tests/classification/NuSVC/mllite.NuSVC_iris_sampled_sqlite.sql'



SQL_OUT_PUT_FIRST_LINES_START ('iris_sampled', 'NuSVC', 'sqlite')
WITH model_input AS 
 (SELECT "ADS"."index" AS "index",
    CAST("ADS"."X_0" AS FLOAT) AS "X_0", CAST("ADS"."X_1" AS FLOAT) AS "X_1", CAST("ADS"."X_2" AS FLOAT) AS "X_2", CAST("ADS"."X_3" AS FLOAT) AS "X_3"
  FROM "iris_sampled" AS "ADS" 
 ),
"SV_data" AS
 ( SELECT 
   "Values"."sv_idx" AS "sv_idx",
   CAST("Values"."sv_0" AS FLOAT) AS "sv_0",
   CAST("Values"."sv_1" AS FLOAT) AS "sv_1",
   CAST("Values"."sv_2" AS FLOAT) AS "sv_2",
   CAST("Values"."sv_3" AS FLOAT) AS "sv_3"
  FROM
  (
     SELECT 0 AS "sv_idx", 5.400000 AS "sv_0", 3.700000 AS "sv_1", 1.500000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 1 AS "sv_idx", 4.800000 AS "sv_0", 3.400000 AS "sv_1", 1.600000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 2 AS "sv_idx", 5.400000 AS "sv_0", 3.400000 AS "sv_1", 1.500000 AS "sv_2", 0.400000 AS "sv_3"
     UNION ALL
     SELECT 3 AS "sv_idx", 5.000000 AS "sv_0", 3.300000 AS "sv_1", 1.400000 AS "sv_2", 0.200000 AS "sv_3"
     UNION ALL
     SELECT 4 AS "sv_idx", 6.300000 AS "sv_0", 3.
SQL_OUT_PUT_FIRST_LINES_END ('iris_sampled', 'NuSVC', 'sqlite')
SQL_OUT_PUT_LAST_LINES_START ('iris_sampled', 'NuSVC', 'sqlite')
roba",
     t."Max_Score" AS "Max_Score",
     COALESCE(  t."max_idx_0", t."max_idx_1", t."max_idx_2" ) AS argmax_class_idx
   FROM
     "arg_max_cte_with_max_proba_idx" AS t
)
SELECT arg_max_cte."index" AS "index",
  arg_max_cte."Score_0" AS "Score_0",
  arg_max_cte."Proba_0" AS "Proba_0",
  CASE WHEN (arg_max_cte."Proba_0" IS NULL OR arg_max_cte."Proba_0" > 0.0) THEN LN( arg_max_cte."Proba_0" ) ELSE -1.79769313486231e+308 END AS "LogProba_0",
  arg_max_cte."Score_1" AS "Score_1",
  arg_max_cte."Proba_1" AS "Proba_1",
  CASE WHEN (arg_max_cte."Proba_1" IS NULL OR arg_max_cte."Proba_1" > 0.0) THEN LN( arg_max_cte."Proba_1" ) ELSE -1.79769313486231e+308 END AS "LogProba_1",
  arg_max_cte."Score_2" AS "Score_2",
  arg_max_cte."Proba_2" AS "Proba_2",
  CASE WHEN (arg_max_cte."Proba_2" IS NULL OR arg_max_cte."Proba_2" > 0.0) THEN LN( arg_max_cte."Proba_2" ) ELSE -1.79769313486231e+308 END AS "LogProba_2",
  arg_max_cte."argmax_class_idx" AS "Decision",
  arg_max_cte."Max_Proba" AS "DecisionProba"
FROM arg_max_cte
SQL_OUT_PUT_LAST_LINES_END ('iris_sampled', 'NuSVC', 'sqlite') 




COPY_TRAINING_DATA_TO_SQLITE_START
<class 'pandas.core.frame.DataFrame'>
Index: 18 entries, 0 to 17
Data columns (total 4 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   X_0     18 non-null     float32
 1   X_1     18 non-null     float32
 2   X_2     18 non-null     float32
 3   X_3     18 non-null     float32
dtypes: float32(4)
memory usage: 432.0 bytes
       X_0  X_1  X_2  X_3
index                    
0      6.4  3.2  5.3  2.3
1      6.3  3.3  4.7  1.6
2      7.1  3.0  5.9  2.1
3      6.1  2.6  5.6  1.4
4      6.8  3.2  5.9  2.3
5      5.8  2.7  4.1  1.0
6      6.1  2.8  4.0  1.3
7      6.0  3.4  4.5  1.6
8      5.4  3.7  1.5  0.2
9      4.8  3.4  1.6  0.2
10     5.4  3.4  1.5  0.4
11     5.9  3.0  4.2  1.5
12     5.1  2.5  3.0  1.1
13     5.8  2.6  4.0  1.2
14     6.7  3.3  5.7  2.1
15     5.0  3.3  1.4  0.2
16     6.2  2.9  4.3  1.3
17     4.7  3.2  1.3  0.2
COPY_TRAINING_DATA_TO_SQLITE_END


PREDICT_MODEL_ON_TRAINING_DATA_INSIDE_SQLITE_START
MODEL_SQL_EXECUTION_FAILED ('iris_sampled', 'NuSVC', 'sqlite', '(sqlite3.OperationalError) no such function: ANY_VALUE')
MLLITE_CLASS_SQL_EXECUTION_STATUS ('iris_sampled', 'NuSVC', 'sqlite', 'sql_execution_failed')
